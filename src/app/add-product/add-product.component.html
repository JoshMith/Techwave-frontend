<!-- Header Navigation -->
<header class="header">
  <nav class="nav-container">
    <div class="nav-items">
      <a routerLink="/" class="nav-link">Home</a>
      <a routerLink="/shop" class="nav-link">Shop</a>
      <a routerLink="/seller-dashboard" class="nav-link">Dashboard</a>
      <a routerLink="/add-product" class="nav-link active">Add Product</a>
      <a routerLink="/orders" class="nav-link">Orders</a>
      <a routerLink="/profile" class="nav-link">Profile</a>
    </div>
  </nav>
</header>

<!-- Main Content -->
<main class="main-content">
  <!-- Page Header -->
  <div class="page-header">
    <h1 class="page-title">Add New Product</h1>
    <p class="page-subtitle">List your electronics and reach customers in Nairobi, Meru, and beyond</p>
  </div>

  <!-- Add Product Form -->
  <div class="form-container">
    <div class="form-header">
      <h2>Product Information</h2>
      <p>Fill in the details below to add your product to TechWave Electronics</p>
    </div>

    <div class="form-content">
      <form [formGroup]="productForm" (ngSubmit)="onSubmit()" class="form-grid">
        <!-- Basic Information Section -->
        <div class="form-section">
          <h3 class="section-title">Basic Information</h3>

          <div class="form-row">
            <div class="form-group">
              <label for="productTitle" class="form-label required">Product Title</label>
              <input type="text" id="productTitle" formControlName="title" class="form-input"
                placeholder="e.g., Samsung Galaxy A54 5G">
              <span class="help-text">Make it descriptive and include key features</span>
              <div *ngIf="productForm.get('title')?.invalid && productForm.get('title')?.touched" class="error-message">
                Product title is required (max 100 characters)
              </div>
            </div>

            <div class="form-group">
              <label for="category" class="form-label required">Category</label>
              <select id="category" formControlName="category" class="form-select">
                <option value="">Select a category</option>
                <option *ngFor="let category of categories" [value]="category.value">{{category.label}}</option>
              </select>
              <div *ngIf="productForm.get('category')?.invalid && productForm.get('category')?.touched"
                class="error-message">
                Please select a category
              </div>
            </div>
          </div>

          <div class="form-group full-width">
            <label for="description" class="form-label required">Product Description</label>
            <textarea id="description" formControlName="description" class="form-textarea"
              placeholder="Describe your product in detail. Include features, condition, what's included in the box, etc."></textarea>
            <span class="help-text">Provide a detailed description to help customers make informed decisions</span>
            <div *ngIf="productForm.get('description')?.invalid && productForm.get('description')?.touched"
              class="error-message">
              Product description is required
            </div>
          </div>
        </div>

        <!-- Pricing & Inventory Section -->
        <div class="form-section">
          <h3 class="section-title">Pricing & Inventory</h3>

          <div class="form-row">
            <div class="form-group">
              <label for="price" class="form-label required">Price</label>
              <div class="price-input-group">
                <span class="currency-symbol">KSh</span>
                <input type="number" id="price" formControlName="price" class="form-input price-input"
                  placeholder="29999" min="1" step="0.01">
              </div>
              <span class="help-text">Regular selling price in Kenyan Shillings</span>
              <div *ngIf="productForm.get('price')?.invalid && productForm.get('price')?.touched" class="error-message">
                Valid price is required (minimum 1 KSh)
              </div>
            </div>

            <div class="form-group">
              <label for="salePrice" class="form-label">Sale Price (Optional)</label>
              <div class="price-input-group">
                <span class="currency-symbol">KSh</span>
                <input type="number" id="salePrice" formControlName="salePrice" class="form-input price-input"
                  placeholder="24999" min="1" step="0.01">
              </div>
              <span class="help-text">Discounted price if on sale</span>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="stock" class="form-label required">Stock Quantity</label>
              <input type="number" id="stock" formControlName="stock" class="form-input" placeholder="10" min="0"
                step="1">
              <span class="help-text">Number of units available</span>
              <div *ngIf="productForm.get('stock')?.invalid && productForm.get('stock')?.touched" class="error-message">
                Valid stock quantity is required (minimum 0)
              </div>
            </div>

            <div class="form-group">
              <label for="condition" class="form-label required">Condition</label>
              <select id="condition" formControlName="condition" class="form-select">
                <option value="">Select condition</option>
                <option *ngFor="let condition of conditions" [value]="condition.value">{{condition.label}}</option>
              </select>
              <div *ngIf="productForm.get('condition')?.invalid && productForm.get('condition')?.touched"
                class="error-message">
                Please select a condition
              </div>
            </div>
          </div>
        </div>

        <!-- Product Images Section -->
        <div class="form-section">
          <h3 class="section-title">Product Images</h3>

          <div class="form-group full-width">
            <label class="form-label required">Upload Images</label>
            <div class="image-upload-area" (click)="fileInput.click()" (dragover)="onDragOver($event)"
              (dragleave)="onDragLeave($event)" (drop)="onDrop($event)">
              <div class="upload-icon">ðŸ“·</div>
              <div class="upload-text">Click to upload or drag and drop</div>
              <div class="upload-subtext">PNG, JPG up to 5MB each. First image will be the main photo.</div>
              <input #fileInput type="file" class="file-input" multiple accept="image/*"
                (change)="onFileSelected($event)">
            </div>
            <div id="imagePreview" class="image-preview">
              <div *ngFor="let image of uploadedImages; let i = index" class="image-preview-item">
                <img [src]="image.url" [alt]="image.name" class="preview-image">
                <button type="button" class="remove-image" (click)="removeImage(i)">Ã—</button>
              </div>
            </div>
            <span class="help-text">Add multiple angles - front, back, sides, ports, and any accessories included</span>
            <div *ngIf="uploadedImages.length === 0 && productForm.touched" class="error-message">
              At least one image is required
            </div>
          </div>
        </div>

        <!-- Technical Specifications Section -->
        <div class="form-section">
          <h3 class="section-title">Technical Specifications</h3>

          <div class="form-group full-width">
            <label class="form-label">Specifications</label>
            <div class="specs-container">
              <div id="specsContainer">
                <div *ngFor="let spec of specifications; let i = index" class="spec-row">
                  <input type="text" class="spec-key" [(ngModel)]="spec.key" [ngModelOptions]="{standalone: true}"
                    placeholder="Feature name (e.g., Storage)">
                  <input type="text" class="spec-value" [(ngModel)]="spec.value" [ngModelOptions]="{standalone: true}"
                    placeholder="Value (e.g., 128GB)">
                  <button type="button" class="remove-spec-btn" (click)="removeSpecification(i)">Ã—</button>
                </div>
              </div>
              <button type="button" class="add-spec-btn" (click)="addSpecification()">+ Add Specification</button>
            </div>
            <span class="help-text">Add key specifications like storage, RAM, display size, etc.</span>
          </div>
        </div>

        <!-- Form Actions -->
        <div class="form-actions">
          <button type="button" class="btn btn-secondary" (click)="onCancel()">Cancel</button>
          <button type="submit" class="btn btn-primary" [disabled]="isSubmitting">
            {{ isSubmitting ? 'Adding Product...' : 'Add Product' }}
          </button>
        </div>
      </form>
    </div>
  </div>
</main>